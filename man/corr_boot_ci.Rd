% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/corr_boot_ci.R
\name{corr_boot_ci}
\alias{corr_boot_ci}
\title{Bootstrap and Analytic Confidence Intervals for Correlation Coefficients}
\usage{
corr_boot_ci(
  data,
  x,
  y,
  method = c("spearman", "pearson", "kendall"),
  conf_level = 0.95,
  R = 2000,
  ci_types = "bca",
  seed = NULL,
  parallel = c("no", "multicore", "snow"),
  ncpus = getOption("mc.cores", 1)
)
}
\arguments{
\item{data}{A data frame containing the variables of interest.}

\item{x, y}{Column names (unquoted) specifying the variables to correlate.}

\item{method}{Correlation method; one of \code{"spearman"}, \code{"pearson"}, or \code{"kendall"}.}

\item{conf_level}{Confidence level for the intervals (default \code{0.95}).}

\item{R}{Number of bootstrap resamples (default \code{2000}).}

\item{ci_types}{Character vector of CI types to return. Valid values are:
\itemize{
\item \code{"bca"} – bias-corrected and accelerated bootstrap CI
\item \code{"basic"} – basic bootstrap CI
\item \code{"perc"} – percentile bootstrap CI
\item \code{"norm"} – normal bootstrap CI
\item \code{"fisherz"} – analytic Fisher-\emph{z} CI (Pearson only, no bootstrap required)
One or more types can be requested; order determines output order.
}}

\item{seed}{Optional integer seed for reproducibility.}

\item{parallel}{Bootstrap parallelization method; passed to \code{\link[boot:boot]{boot::boot()}}
(\code{"no"}, \code{"multicore"}, or \code{"snow"}).}

\item{ncpus}{Number of cores for parallel execution (default from
\code{getOption("mc.cores", 1)}).}
}
\value{
A tibble with columns:
\describe{
\item{method}{Correlation method used.}
\item{estimate}{Observed correlation coefficient.}
\item{lower_ci, upper_ci}{Lower and upper confidence limits.}
\item{ci_type}{Type of CI.}
\item{conf_level}{Confidence level.}
\item{R}{Number of bootstrap resamples (NA for analytic CIs).}
\item{n}{Number of complete observations used.}
\item{p_value}{Two-sided p-value from \code{\link[stats]{cor.test}}.}
}
The returned tibble has an attribute \code{"boot_object"} containing the \code{boot}
object from \code{\link[boot:boot]{boot::boot()}} if bootstrap CIs were computed, or \code{NULL} otherwise.
}
\description{
Computes correlation coefficients (Pearson, Spearman, or Kendall) along with
bootstrap-based confidence intervals and, optionally, an analytic Fisher-\emph{z}
confidence interval for Pearson correlations.
}
\details{
For Pearson correlations, the analytic Fisher-\emph{z} interval is computed as:
\deqn{z = \tanh^{-1}(r), \quad SE = 1/\sqrt{n-3},}
\deqn{\mathrm{CI} = \tanh(z \pm z_{\alpha/2} \times SE).}

Bootstrap CIs are computed via \code{\link[boot:boot]{boot::boot()}} and \code{\link[boot:boot.ci]{boot::boot.ci()}}. If a
requested bootstrap CI type fails, a percentile CI is returned as a fallback
with a warning. If percentile also fails, NA bounds are returned.
}
\examples{
# Spearman with BCa (default)
corr_boot_ci(mtcars, mpg, wt, method = "spearman")

# Pearson with multiple bootstrap CI types
corr_boot_ci(mtcars, mpg, wt, method = "pearson",
             ci_types = c("bca","basic","perc","norm"),
             R = 5000, seed = 42)

# Kendall with percentile CI only
corr_boot_ci(mtcars, mpg, wt, method = "kendall",
             ci_types = "perc", R = 3000)

# Pearson with Fisher-z analytic CI only (no bootstrap)
corr_boot_ci(mtcars, mpg, wt, method = "pearson", ci_types = "fisherz")

# Pearson with both Fisher-z and BCa bootstrap CIs
corr_boot_ci(mtcars, mpg, wt, method = "pearson",
             ci_types = c("fisherz","bca"), R = 5000, seed = 42)

}
